<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        textarea {
            text-align: center;
            width: 50%;
            height: 500px;
        }

        .botao {
            display: inline-block;
            padding: 15px 30px;
            /* Ajuste o valor de padding para aumentar o tamanho */
            background-color: #007bff;
            color: #fff;
            border-radius: 25px;
            /* Valor de raio de borda ajustável */
            border: none;
            text-align: center;
            font-size: 16px;
            /* Ajuste o valor de font-size para aumentar o tamanho */
            cursor: pointer;
            transition: background-color 0.3s ease;
            /* Transição suave de cor de fundo */
            width: 200px;
            /* Ajuste o valor de width para alterar a largura do botão */
        }

        /* Efeito de hover (sobreposição) no botão */
        .botao:hover {
            background-color: #008fb3;
            /* Nova cor de fundo no hover */
        }
    </style>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formataús</title>
</head>

<body onload="inicializer()">
    <div style="text-align: center;">
        <h1>Formataús</h1>
        <textarea placeholder="Digite seu texto aqui, Caso possua cifra, remover primeiro!" id="texto"></textarea><br>
        <button class="botao" onclick="turnUpperCase()">Maiúsculo</button>
        <button class="botao" onclick="turnLowerCase()">Minúsculo</button>
        <button id="btnCifra" class="botao" onclick="removerAcordes()">Remove Cifra</button>
    </div>
    <script>
        let text
        let btnCifra
        let comCifra = true
        let textoOriginal
        function inicializer() {
            text = document.getElementById("texto")
            btnCifra = document.getElementById("btnCifra")
        }
        function turnUpperCase() {

            text.value = text.value.toUpperCase()
        }
        function turnLowerCase() {
            text.value = text.value.toLowerCase()
        }
        function removeAcordes() {
            text.value = removerCifras(text.value)
        }

        function removerAcordes() {
            if (comCifra) {
                textoOriginal = text.value;
                const textoParaAlterar = textoOriginal
                const regexAcordes = /\b[A-G](#|b)?(maj|min|dim|aug|sus|°|m)?\d?(\/\w+)?\b/g;
                const linhas = textoParaAlterar.split(/\r?\n/g);
                let textoSemAcordes = '';
                const acordesExcluir = ['Em', 'Am', 'Bm', 'Bm7', 'C7', 'D7', 'G7', 'F7', 'A7', 'E7', 'C7', 'D7','D#º'];
                for (let i = 0; i < linhas.length; i++) {
                    const linha = linhas[i];
                    if (linha.trim() === '' || acordesExcluir.some(acorde => linha.includes(acorde))) {
                        continue;
                    }
                    const linhaSemAcordes = linha.replace(regexAcordes, '').replace(/[+#°]/g, '').trim();
                    if (linhaSemAcordes.trim() !== '') {
                        textoSemAcordes += linhaSemAcordes + '\n';
                    }
                }
                text.value = textoSemAcordes.trim();
                comCifra = false;
                btnCifra.innerHTML = "Texto Original"
            }
            else{
                text.value = textoOriginal
                comCifra = true
                btnCifra.innerHTML = "Remover Cifra"
            }

        }



    </script>

</body>

</html>
